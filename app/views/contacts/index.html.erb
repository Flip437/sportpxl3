<%= stylesheet_link_tag 'template/dataTables.bootstrap4.min.css', media: 'all', 'data-turbolinks-track' => true %>
<%#= stylesheet_link_tag 'template/datatables.css', media: 'all', 'data-turbolinks-track' => true %>

<div class="breadcrumb mb-0 mx-0">
  <span> <a href="<%= root_path%>"> Accueil </a> >
  <%= @edition.event.name %> >
  <%= @edition.date.strftime('%d/%m/%Y') %> >
  Contact > 
  Résultats
  </span>
</div>

<div class="row">
  <div class="col-md-2 bg-primary p-5">
	<%= render 'layouts/sidebar' %>
  </div>

	<div class="col-md-10 px-10">

		<div class="row justify-content-center mt-5 mb-5">
			<div class="col-md-7 text-center">
				<h2 class="text-primary font-bold">Contacts Enregistrés</h2>
				<%= image_tag("svg/3colors.svg") %>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 pl-0">

				<div class="row bg-primary py-3">
					<div class="col-md-3 w-100">
						<div class="row h-100 py-3 pl-3">
							<input type="text" class="font-futura font-15px text-primary w-100" ng-model="vm.searchContact" placeholder="Rechercher un contact">
						</div>
					</div>
					<div class="col-md-3 w-100">
						<div class="row h-100 py-3">
							<table class="h-100">
								<tbody class="">
									<tr>
										<td class=""><%= link_to(root_path, class:"mx-2") do %><%= image_tag("svg/letter_white.svg", class:"align-middle", alt: "Email envoyer") %><% end %></td>
										<td class=""><%= link_to(root_path, class:"mx-2") do %><%= image_tag("svg/eye_white.svg", class:"align-middle", alt: "Deja vu") %><% end %></td>
										<td class=""><%= link_to(root_path, class:"mx-2") do %><%= image_tag("svg/alert_white.svg", class:"align-middle", alt: "erreur survenue") %><% end %></td>
										<td class=""><%= link_to(root_path, class:"mx-2") do %><%= image_tag("svg/focus_white.svg", class:"align-middle", alt: "SMS envoyer") %><% end %></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="col-md-6">
						<div class="row h-100 py-2 pl-3">

								<%= link_to(new_event_campaign_path( params[:event_id], params[:edition_id] ), class: 'btn bg-blue text-white font-light font-10px mx-1',  id: 'newCamp') do %>
									<%= image_tag 'svg/opened_letter_white' %>
									Nouvelle Campagne
								<% end %>

								<%= link_to(new_event_campaign_path( params[:event_id], params[:edition_id] ), class: 'btn bg-yellow text-white font-light font-10px mx-1',  id: 'newCamp') do %>
									<%= image_tag('svg/contact', height: '19px') %>
									Importer des contacts
								<% end %>
								
						</div>
					</div>
				</div>


        <div class="row bg-lightblue mb-3">

          <div class="col-md-12 padtop">



						<table id="datatable" class="table table-hover mb-5 table-borderless">
							<thead>
                <tr class="bg-blue text-white font-light">
                  <th class=" align-middle" colspan="1">Nom & Prénom</th>
                  <th class=" align-middle" colspan="1">Photo</th>
                  <th class=" align-middle" colspan="1">Email</th>
									<th class=" align-middle" colspan="1">Numéro de Téléphone</th>
									<th class=" align-middle" colspan="1">Numéro de Dossard</th>
                </tr>
							</thead>
							<tfoot class="no-print">
                <tr class="bg-blue text-white font-light">
                  <th class=" align-middle" colspan="1">Nom & Prénom</th>
                  <th class=" align-middle" colspan="1">Photo</th>
                  <th class=" align-middle" colspan="1">Email</th>
									<th class=" align-middle" colspan="1">Numéro de Téléphone</th>
									<th class=" align-middle" colspan="1">Numéro de Dossard</th>
                </tr>
							</tfoot>

							<% @edition.contacts.each do |contact| %>
              <tbody class="text-primary font-condensed">
                <tr>
                  <td class="border-primary">Brone Ophélia</td>
                  <td class="border-primary">Photo 15</td>
                  <td class="border-primary">xxx@gmail.com</td>
									<td class="border-primary">00 00 00 00 00</td>
									<td class="border-primary">5000</td>
                </tr>
                <tr>
                  <td class="border-primary"><%= contact.nom %> <%= contact.prenom %></td>
                  <td class="border-primary">Photo 15</td>
                  <td class="border-primary"><%= contact.email %></td>
									<td class="border-primary"><%= contact.telephone %></td>
									<td class="border-primary"><%= contact.dossard %></td>
                </tr>
              </tbody>
							<% end %>

              <tfoot class="bg-white text-primary font-light font-15px">
                <tr>
                  <td>
                    <select name="" id="" class="">
                      <option value="">5</option>
                      <option value="">10</option>
                      <option value="">15</option>
                      <option value="">20</option>
                      <option value="">30</option>
                      <option value="">50</option>
                      <option value="">100</option>
                    </select>
                    Campagnes par pages
                  </td>
                  <td colspan="4"><1/1></td>
                </tr>
              </tfoot>
            </table>


						<table id="datatable" class="table table-striped table-bordered" style="width:100%">
							<thead>
								<tr>
										<th>Name</th>
										<th>Position</th>
										<th>Office</th>
										<th>Age</th>
										<th>Start date</th>
										<th>Salary</th>
								</tr>
							</thead>
							<tbody>
								<tr>
										<td>Tiger Nixon</td>
										<td>System Architect</td>
										<td>Edinburgh</td>
										<td>61</td>
										<td>2011/04/25</td>
										<td>$320,800</td>
								</tr>
								<tr>
										<td>Garrett Winters</td>
										<td>Accountant</td>
										<td>Tokyo</td>
										<td>63</td>
										<td>2011/07/25</td>
										<td>$170,750</td>
								</tr>
								<tr>
										<td>Ashton Cox</td>
										<td>Junior Technical Author</td>
										<td>San Francisco</td>
										<td>66</td>
										<td>2009/01/12</td>
										<td>$86,000</td>
								</tr>
								<tr>
										<td>Cedric Kelly</td>
										<td>Senior Javascript Developer</td>
										<td>Edinburgh</td>
										<td>22</td>
										<td>2012/03/29</td>
										<td>$433,060</td>
								</tr>
								<tr>
										<td>Airi Satou</td>
										<td>Accountant</td>
										<td>Tokyo</td>
										<td>33</td>
										<td>2008/11/28</td>
										<td>$162,700</td>
								</tr>
								<tr>
										<td>Brielle Williamson</td>
										<td>Integration Specialist</td>
										<td>New York</td>
										<td>61</td>
										<td>2012/12/02</td>
										<td>$372,000</td>
								</tr>
								<tr>
										<td>Herrod Chandler</td>
										<td>Sales Assistant</td>
										<td>San Francisco</td>
										<td>59</td>
										<td>2012/08/06</td>
										<td>$137,500</td>
								</tr>
								<tr>
										<td>Rhona Davidson</td>
										<td>Integration Specialist</td>
										<td>Tokyo</td>
										<td>55</td>
										<td>2010/10/14</td>
										<td>$327,900</td>
								</tr>
								<tr>
										<td>Colleen Hurst</td>
										<td>Javascript Developer</td>
										<td>San Francisco</td>
										<td>39</td>
										<td>2009/09/15</td>
										<td>$205,500</td>
								</tr>
								<tr>
										<td>Sonya Frost</td>
										<td>Software Engineer</td>
										<td>Edinburgh</td>
										<td>23</td>
										<td>2008/12/13</td>
										<td>$103,600</td>
								</tr>
								<tr>
										<td>Jena Gaines</td>
										<td>Office Manager</td>
										<td>London</td>
										<td>30</td>
										<td>2008/12/19</td>
										<td>$90,560</td>
								</tr>
								<tr>
										<td>Quinn Flynn</td>
										<td>Support Lead</td>
										<td>Edinburgh</td>
										<td>22</td>
										<td>2013/03/03</td>
										<td>$342,000</td>
								</tr>
								<tr>
										<td>Charde Marshall</td>
										<td>Regional Director</td>
										<td>San Francisco</td>
										<td>36</td>
										<td>2008/10/16</td>
										<td>$470,600</td>
								</tr>
								<tr>
										<td>Haley Kennedy</td>
										<td>Senior Marketing Designer</td>
										<td>London</td>
										<td>43</td>
										<td>2012/12/18</td>
										<td>$313,500</td>
								</tr>
								<tr>
										<td>Tatyana Fitzpatrick</td>
										<td>Regional Director</td>
										<td>London</td>
										<td>19</td>
										<td>2010/03/17</td>
										<td>$385,750</td>
								</tr>
								<tr>
										<td>Michael Silva</td>
										<td>Marketing Designer</td>
										<td>London</td>
										<td>66</td>
										<td>2012/11/27</td>
										<td>$198,500</td>
								</tr>
								<tr>
										<td>Paul Byrd</td>
										<td>Chief Financial Officer (CFO)</td>
										<td>New York</td>
										<td>64</td>
										<td>2010/06/09</td>
										<td>$725,000</td>
								</tr>
								<tr>
										<td>Gloria Little</td>
										<td>Systems Administrator</td>
										<td>New York</td>
										<td>59</td>
										<td>2009/04/10</td>
										<td>$237,500</td>
								</tr>
								<tr>
										<td>Bradley Greer</td>
										<td>Software Engineer</td>
										<td>London</td>
										<td>41</td>
										<td>2012/10/13</td>
										<td>$132,000</td>
								</tr>
								<tr>
										<td>Dai Rios</td>
										<td>Personnel Lead</td>
										<td>Edinburgh</td>
										<td>35</td>
										<td>2012/09/26</td>
										<td>$217,500</td>
								</tr>
								<tr>
										<td>Jenette Caldwell</td>
										<td>Development Lead</td>
										<td>New York</td>
										<td>30</td>
										<td>2011/09/03</td>
										<td>$345,000</td>
								</tr>
								<tr>
										<td>Yuri Berry</td>
										<td>Chief Marketing Officer (CMO)</td>
										<td>New York</td>
										<td>40</td>
										<td>2009/06/25</td>
										<td>$675,000</td>
								</tr>
								<tr>
										<td>Caesar Vance</td>
										<td>Pre-Sales Support</td>
										<td>New York</td>
										<td>21</td>
										<td>2011/12/12</td>
										<td>$106,450</td>
								</tr>
								<tr>
										<td>Doris Wilder</td>
										<td>Sales Assistant</td>
										<td>Sydney</td>
										<td>23</td>
										<td>2010/09/20</td>
										<td>$85,600</td>
								</tr>
								<tr>
										<td>Angelica Ramos</td>
										<td>Chief Executive Officer (CEO)</td>
										<td>London</td>
										<td>47</td>
										<td>2009/10/09</td>
										<td>$1,200,000</td>
								</tr>
								<tr>
										<td>Gavin Joyce</td>
										<td>Developer</td>
										<td>Edinburgh</td>
										<td>42</td>
										<td>2010/12/22</td>
										<td>$92,575</td>
								</tr>
								<tr>
										<td>Jennifer Chang</td>
										<td>Regional Director</td>
										<td>Singapore</td>
										<td>28</td>
										<td>2010/11/14</td>
										<td>$357,650</td>
								</tr>
								<tr>
										<td>Brenden Wagner</td>
										<td>Software Engineer</td>
										<td>San Francisco</td>
										<td>28</td>
										<td>2011/06/07</td>
										<td>$206,850</td>
								</tr>
								<tr>
										<td>Fiona Green</td>
										<td>Chief Operating Officer (COO)</td>
										<td>San Francisco</td>
										<td>48</td>
										<td>2010/03/11</td>
										<td>$850,000</td>
								</tr>
								<tr>
										<td>Shou Itou</td>
										<td>Regional Marketing</td>
										<td>Tokyo</td>
										<td>20</td>
										<td>2011/08/14</td>
										<td>$163,000</td>
								</tr>
								<tr>
										<td>Michelle House</td>
										<td>Integration Specialist</td>
										<td>Sydney</td>
										<td>37</td>
										<td>2011/06/02</td>
										<td>$95,400</td>
								</tr>
								<tr>
										<td>Suki Burks</td>
										<td>Developer</td>
										<td>London</td>
										<td>53</td>
										<td>2009/10/22</td>
										<td>$114,500</td>
								</tr>
								<tr>
										<td>Prescott Bartlett</td>
										<td>Technical Author</td>
										<td>London</td>
										<td>27</td>
										<td>2011/05/07</td>
										<td>$145,000</td>
								</tr>
								<tr>
										<td>Gavin Cortez</td>
										<td>Team Leader</td>
										<td>San Francisco</td>
										<td>22</td>
										<td>2008/10/26</td>
										<td>$235,500</td>
								</tr>
								<tr>
										<td>Martena Mccray</td>
										<td>Post-Sales support</td>
										<td>Edinburgh</td>
										<td>46</td>
										<td>2011/03/09</td>
										<td>$324,050</td>
								</tr>
								<tr>
										<td>Unity Butler</td>
										<td>Marketing Designer</td>
										<td>San Francisco</td>
										<td>47</td>
										<td>2009/12/09</td>
										<td>$85,675</td>
								</tr>
								<tr>
										<td>Howard Hatfield</td>
										<td>Office Manager</td>
										<td>San Francisco</td>
										<td>51</td>
										<td>2008/12/16</td>
										<td>$164,500</td>
								</tr>
								<tr>
										<td>Hope Fuentes</td>
										<td>Secretary</td>
										<td>San Francisco</td>
										<td>41</td>
										<td>2010/02/12</td>
										<td>$109,850</td>
								</tr>
								<tr>
										<td>Vivian Harrell</td>
										<td>Financial Controller</td>
										<td>San Francisco</td>
										<td>62</td>
										<td>2009/02/14</td>
										<td>$452,500</td>
								</tr>
								<tr>
										<td>Timothy Mooney</td>
										<td>Office Manager</td>
										<td>London</td>
										<td>37</td>
										<td>2008/12/11</td>
										<td>$136,200</td>
								</tr>
								<tr>
										<td>Jackson Bradshaw</td>
										<td>Director</td>
										<td>New York</td>
										<td>65</td>
										<td>2008/09/26</td>
										<td>$645,750</td>
								</tr>
								<tr>
										<td>Olivia Liang</td>
										<td>Support Engineer</td>
										<td>Singapore</td>
										<td>64</td>
										<td>2011/02/03</td>
										<td>$234,500</td>
								</tr>
								<tr>
										<td>Bruno Nash</td>
										<td>Software Engineer</td>
										<td>London</td>
										<td>38</td>
										<td>2011/05/03</td>
										<td>$163,500</td>
								</tr>
								<tr>
										<td>Sakura Yamamoto</td>
										<td>Support Engineer</td>
										<td>Tokyo</td>
										<td>37</td>
										<td>2009/08/19</td>
										<td>$139,575</td>
								</tr>
								<tr>
										<td>Thor Walton</td>
										<td>Developer</td>
										<td>New York</td>
										<td>61</td>
										<td>2013/08/11</td>
										<td>$98,540</td>
								</tr>
								<tr>
										<td>Finn Camacho</td>
										<td>Support Engineer</td>
										<td>San Francisco</td>
										<td>47</td>
										<td>2009/07/07</td>
										<td>$87,500</td>
								</tr>
								<tr>
										<td>Serge Baldwin</td>
										<td>Data Coordinator</td>
										<td>Singapore</td>
										<td>64</td>
										<td>2012/04/09</td>
										<td>$138,575</td>
								</tr>
								<tr>
										<td>Zenaida Frank</td>
										<td>Software Engineer</td>
										<td>New York</td>
										<td>63</td>
										<td>2010/01/04</td>
										<td>$125,250</td>
								</tr>
								<tr>
										<td>Zorita Serrano</td>
										<td>Software Engineer</td>
										<td>San Francisco</td>
										<td>56</td>
										<td>2012/06/01</td>
										<td>$115,000</td>
								</tr>
								<tr>
										<td>Jennifer Acosta</td>
										<td>Junior Javascript Developer</td>
										<td>Edinburgh</td>
										<td>43</td>
										<td>2013/02/01</td>
										<td>$75,650</td>
								</tr>
								<tr>
										<td>Cara Stevens</td>
										<td>Sales Assistant</td>
										<td>New York</td>
										<td>46</td>
										<td>2011/12/06</td>
										<td>$145,600</td>
								</tr>
								<tr>
										<td>Hermione Butler</td>
										<td>Regional Director</td>
										<td>London</td>
										<td>47</td>
										<td>2011/03/21</td>
										<td>$356,250</td>
								</tr>
								<tr>
										<td>Lael Greer</td>
										<td>Systems Administrator</td>
										<td>London</td>
										<td>21</td>
										<td>2009/02/27</td>
										<td>$103,500</td>
								</tr>
								<tr>
										<td>Jonas Alexander</td>
										<td>Developer</td>
										<td>San Francisco</td>
										<td>30</td>
										<td>2010/07/14</td>
										<td>$86,500</td>
								</tr>
								<tr>
										<td>Shad Decker</td>
										<td>Regional Director</td>
										<td>Edinburgh</td>
										<td>51</td>
										<td>2008/11/13</td>
										<td>$183,000</td>
								</tr>
								<tr>
										<td>Michael Bruce</td>
										<td>Javascript Developer</td>
										<td>Singapore</td>
										<td>29</td>
										<td>2011/06/27</td>
										<td>$183,000</td>
								</tr>
								<tr>
										<td>Donna Snider</td>
										<td>Customer Support</td>
										<td>New York</td>
										<td>27</td>
										<td>2011/01/25</td>
										<td>$112,000</td>
								</tr>
							</tbody>
							<tfoot>
								<tr>
										<th>Name</th>
										<th>Position</th>
										<th>Office</th>
										<th>Age</th>
										<th>Start date</th>
										<th>Salary</th>
								</tr>
							</tfoot>
						</table>

          </div>

        </div>

      </div>
		</div>
	
	
	
	
	
	<header>
		<div class="row">
			<div class="col-md-9">
				<!-- <h1> {{ vm.name }} </h1> -->
				<h2>Contact(s) Enregistré(s)</h2> 
			</div>
			<div class="col-md-3 pull-right">
				<input type="text" class="searchContact" ng-model="vm.searchContact" placeholder="Rechrcher un contact">
			</div>
		</div>

		<div class="row">
			<div class="col-md-4">
				<%= link_to 'Nouvel Campagne', new_event_campaign_path( params[:event_id], params[:edition_id] ), class: 'btn-orange-small',  id: 'newCamp' %>
				<!--<a href="#" class="btn-white-small">Supprimer</a>-->
			</div>
			<div class="col-md-8 pull-right">
				<ul class="list-inline">
					<li>
						<a href="#" class="btn-white-small">Importation CSV</a>
						<a href="#" class="btn-white-small">Exporter la Liste</a>
					</li>
					<li> <a href="#"> <%= image_tag("btn-email-envoyer.png", size: "22x16", alt: "Email envoyer") %> </a> </li>
					<li> <a href="#"> <%= image_tag("btn-deja-vu.png", size: "29x17", alt: "Deja vu") %> </a>  </li>
					<li> <a href="#"> <%= image_tag("btn-sms-email-fail.png", size: "26x22", alt: "erreur survenue") %> </a> </li>
					<li> <a href="#"> <%= image_tag("btn-sms-envoyer.png", size: "26x22", alt: "SMS envoyer") %> </a> </li>

				</ul>
			</div>
		</div>

	</header>
	<!-- Table -->
	<br/>
	<table class="table">
		<thead>
			<tr>
				<th> Nom & Prenom </th>
				<th> Photo </th>
				<th> Email </th>
				<th> Numéro de Téléphone </th>
				<th> Numéro de Dossrad </th>
			</tr>
		</thead>
		<tbody ng-model="vm.id">
			<tr ng-repeat="c in vm.allContacts | limitTo: vm.perPage : (vm.curentPage -1) * vm.perPage | filter:vm.searchContact">
				<td> {{ c.nom }} {{ c.prenom }} </td>
				<td> Photo <span class="photoCount">18</span> </td>
				<td> {{ c.email }} <span class="EmailStatus"></span> </td>
				<td> {{ c.telephone }} <span class="smsStatus"></span> </td>
				<td> {{ c.dossard }} </td>
			</tr>

		</tbody>
	</table>

	<ul class="list-inline">
		<li>
			<a href="#" class="btn btn-previous-pag" ng-click="vm.previousContacts()"> < </a> 
				{{vm.curentPage}}/{{vm.numberPagination}}
			<a href="#" class="btn btn-next-pag"  ng-click="vm.nextContacts()"> > </a> 
		</li>
		<li>
			<select ng-model="vm.perPage"
				ng-options="p for p in vm.perPageArr">
			</select> 
			<span>Contact par page</span>
		</li>

	</ul>

</div>



<%= javascript_include_tag 'template/jquery-3.5.1.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/jquery.dataTables.min.js', 'data-turbolinks-track' => true  %>
<%= javascript_include_tag 'template/dataTables.bootstrap4.min.js', 'data-turbolinks-track' => true  %>
<%#= javascript_include_tag 'template/datatables.js', 'data-turbolinks-track' => true %>
<%#= render partial: "helpers/datatables_fullfledged", locals: {table_id: "#datatable", options_for_datatable: nil} %>

<script>
  function showMenuItems() {
    $("li[data-target='#contact']").removeClass("collapsed")
    $("#contact").addClass("show")
		$('#liste').addClass('active')
  }
  showMenuItems();


	$(document).ready(function() {
		$('#datatable').DataTable(
			// {"searching": false}
		);
	});


</script>


