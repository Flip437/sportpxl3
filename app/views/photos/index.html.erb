<div>
  <% flash.to_hash.except!("photo_errors").each do |key, value| %>
    <div class="alert alert-<%= key %>">
      <%= value %> 
    </div>
  <% end %>
</div>

<div class="breadcrumb mb-0 mx-0">
  <span> <a href="<%= root_path%>"> Accueil </a> >
    <%= @edition.event.name %> > <%= @edition.date.strftime('%d/%m/%Y') %> >
  </span>
  <b> Photos </b>
</div>



<div class="row h-100 mx-0">
  <div class="col-md-2 bg-primary p-5">
    <%= render 'layouts/sidebar' %>
  </div>

  <div class="col-md-10 px-5">
    <div class="">

      <% if flash[:photo_errors] %>
      <div>
        <% flash[:photo_errors].each do |key, value| %>
          <div class="alert alert-alert"> Le <%= t("activerecord.attributes.photo.#{key}") %> <%= value.to_s.gsub(/\"/, '').gsub(/[\[\]]/, '') %> </div>
        <% end %>
      </div>
      <% end %>

      <div class="row justify-content-center mt-5 mb-5">
        <div class="col-md-7 text-center">
          <h2 class="text-primary font-bold">Photos</h2>
          <%= image_tag("svg/3colors.svg") %>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-6">
          <%= will_paginate @photos, renderer: BootstrapPagination::Rails %>
        </div>
        <div class="col-sm-6">
          <div class="pull-right">
            <%= link_to "Retour", event_edition_path(@edition.id, event_id: @event.id), class: 'btn btn-primary pull-right' %>
          </div>
        </div>
      </div>

      <% if @photos.any? %>
        <div class="row">
          <div class="col-sm-12">
            <%= link_to 'Supprimer toutes les photos', event_edition_destroy_all_path(event_id: @event.id, edition_id: @edition.id, photo_ids: @photos.pluck(:id)), method: :delete, class: 'btn btn-danger', data: { confirm: 'Êtes vous SÛR(E) de vouloir supprimer TOUTES les photos de cette recherche ?' } %>
          </div>
        </div>

        <hr>

        <section class="ftco-section">
          <div class=""><!-- <div class="container-fluid"> -->
            <div class="row">

              <% @photos.each_slice(4) do |photos| %>
                <% photos.each do |photo| %>  
                  <%= render 'photo', photo: photo %>
                <% end %>
              <% end %>

            </div>
          </div>
        </section>

        <p>Blah blah <a href="#gallery1" class="open-gallery-link">view gallery one</a> blah blah ...</p>



          <div id="gallery1" class="mfp-hide">
            <div class="slide">
            <div class="container">
              <div class="row">
                <div class="col-md-12 bg-primary">
                  <%= image_tag Photo.first.direct_image_url %>
                <div>
              </div>
              <div class="row bg-white">
                <div class="col-md-6">
                  <p class="font-25px font-condensed">Numéro de dossard</p>
                  <p>Nom</p>
                  <p>Prénom</p>
                </div>
              </div>
            </div>
            </div>
            <div class="slide">
              ... some content for slide 2 ...
            </div>
          </div>






      <% else %>
        <div class="row">
          <div class="col-sm-12">
            <div class="alert alert-info">
              <p class="text-center"> Aucun résultat </p>
            </div>
          </div>
        </div>
      <% end %>

    </div>
  </div>
</div>

<%= javascript_include_tag 'template/jquery.min.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/jquery-migrate-3.0.1.min.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/popper.min.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/bootstrap.min.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/jquery.easing.1.3.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/jquery.waypoints.min.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/jquery.stellar.min.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/jquery.animateNumber.min.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/bootstrap-datepicker.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/jquery.timepicker.min.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/owl.carousel.min.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/jquery.magnific-popup.min.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/scrollax.min.js', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'template/main.js', 'data-turbolinks-track' => true %>


<script>
  function showMenuItems() {
    $("li[data-target='#photo']").removeClass("collapsed")
    $("#photo").addClass("show")
    $('#voir_photo').addClass('active')
  }
  showMenuItems();




  $('.open-gallery-link').click(function() {
    
    var items = [];
    $( $(this).attr('href') ).find('.slide').each(function() {
      items.push( {
        src: $(this) 
      } );
    });
    
    $.magnificPopup.open({
      items:items,
      gallery: {
        enabled: true 
      }
    });
  });

</script>